#include <stdio.h>
#include <io.h>
int exchange (char text[255][255], int x, int y)  // Функция обменивает строчки
    {
    for (int i = 0; i < 255; i++)
        {
        char chng  = text[x][i];
        text[x][i] = text[y][i];
        text[y][i] = chng;
        }
    }
int strcmp (char s1[255][255], int y, int x)    // Функция сравнивает строчки
    {
    int i = 0;
    for ( i = 0; ((s1[y][i] != '\n') && (s1[x][i] != '\0')); i++)
        {
        if (s1[y][i] < s1[x][i])
            {
            return 1;
            }
        if (s1[y][i] > s1[x][i])
            {
            return 0;
            }

        if ((s1[x][i] == '\n') || (s1[x][i] == '\0'))
            {
            return 0;
            }

        }
        if ((s1[x][i] == '\n') || (s1[x][i] == '\0'))
            {
            return 0;
            }
        return 0;

    }
int bubbleSort (char text[255][255], int nstrok)   // Функция сортирует массив из строчек
    {
    int k, m;
    for (k = 0; k < nstrok; k++)
        {
        for (m = 0; m > k; m--)
            {
            if (strcmp (text, m, m-1))
                {
                exchange (text, m, m-1);
                }
            }
        }
    }
int main()
    {
    FILE *fin = fopen ("first.txt", "r");
    char text[255][255];

    int i, j;
    for (i = 0; i < 255; i++)
        {
        for (j = 0; j < 255; j++)
            {
            text[i][j] = ' ';
            }
        }
    for (i = 0; !feof (fin); i++)
        {
        for (j = 0; (text[i][j] != ('\0')) || (!feof (fin)); j++)
            fscanf (fin, "%c", &(text[i][j]));
        text[i][j] = '\0';
        }
    int nstrok = i;
    for (i = 0; i < nstrok; i++)
        {
        for (j = 0; (text[i][j] != ('\0') || (!feof (fin))); j++)
            printf ("%c", text[i][j]);
        }
    fclose (fin);
    bubbleSort (&(text[0]), nstrok);
    fin = fopen ("first.txt", "a");
    for (i = 0; i < 255; i++)
        {
        for (j = 0; j <255; j++)
            {
            fprintf (fin, "%c", text[i][j]);
            printf ("%c",text[i][j]);
            }
        }
    fclose (fin);
    }
